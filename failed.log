building the system configuration...
warning: Git tree '/home/kang/nixEnvironment' is dirty
trace: evaluation warning: `programs.zsh.initExtraFirst` is deprecated, use `programs.zsh.initContent` with `lib.mkBefore` instead.

Example: programs.zsh.initContent = lib.mkBefore "your content here";

error:
       … while calling anonymous lambda

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/lib/attrsets.nix:1529:14:

         1528|         zipAttrsWith (
         1529|           n: values:
             |              ^
         1530|           let

       … while calling anonymous lambda

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/lib/attrsets.nix:1182:17:

         1181|         mapAttrs (
         1182|           name: value:
             |                 ^
         1183|           if isAttrs value && cond value then recurse (path ++ [ name ]) value else f (path ++ [ name ]) value

       … from call site

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/lib/attrsets.nix:1183:85:

         1182|           name: value:
         1183|           if isAttrs value && cond value then recurse (path ++ [ name ]) value else f (path ++ [ name ]) value
             |                                                                                     ^
         1184|         );

       … while calling anonymous lambda

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/lib/modules.nix:273:71:

          272|           # For definitions that have an associated option
          273|           declaredConfig = mapAttrsRecursiveCond (v: !isOption v) (_: v: v.value) options;
             |                                                                       ^
          274|

       … while evaluating the option `system.build.toplevel':

       … while calling anonymous lambda

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/lib/modules.nix:1100:11:

         1099|         defs' = concatMap (
         1100|           m:
             |           ^
         1101|           map (

       … while evaluating definitions from `/nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/nixos/modules/system/activation/top-level.nix':

       … from call site

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/lib/modules.nix:1110:80:

         1109|               }
         1110|           ) (addErrorContext "while evaluating definitions from `${m.file}':" (dischargeProperties m.value))
             |                                                                                ^
         1111|         ) defs;

       … while calling 'dischargeProperties'

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/lib/modules.nix:1203:5:

         1202|   dischargeProperties =
         1203|     def:
             |     ^
         1204|     if def._type or "" == "merge" then

       … from call site

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/nixos/modules/system/activation/top-level.nix:80:26:

           79|   # Handle assertions and warnings
           80|   baseSystemAssertWarn = lib.asserts.checkAssertWarn config.assertions config.warnings baseSystem;
             |                          ^
           81|

       … while calling 'checkAssertWarn'

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/lib/asserts.nix:193:27:

          192|   checkAssertWarn =
          193|     assertions: warnings: val:
             |                           ^
          194|     let

       … from call site

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/lib/asserts.nix:200:7:

          199|     else
          200|       showWarnings warnings val;
             |       ^
          201|

       … while calling 'showWarnings'

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/lib/trivial.nix:962:28:

          961|
          962|   showWarnings = warnings: res: lib.foldr (w: x: warn w x) res warnings;
             |                            ^
          963|

       … from call site

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/lib/trivial.nix:962:33:

          961|
          962|   showWarnings = warnings: res: lib.foldr (w: x: warn w x) res warnings;
             |                                 ^
          963|

       … while calling 'foldr'

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/lib/lists.nix:139:14:

          138|   foldr =
          139|     op: nul: list:
             |              ^
          140|     let

       … from call site

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/lib/lists.nix:144:5:

          143|     in
          144|     fold' 0;
             |     ^
          145|

       … while calling 'fold''

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/lib/lists.nix:142:15:

          141|       len = length list;
          142|       fold' = n: if n == len then nul else op (elemAt list n) (fold' (n + 1));
             |               ^
          143|     in

       … from call site

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/nixos/modules/system/activation/top-level.nix:62:16:

           61|   # makes it bootable. See `activatable-system.nix`.
           62|   baseSystem = pkgs.stdenvNoCC.mkDerivation (
             |                ^
           63|     {

       … while calling 'mkDerivation'

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/pkgs/stdenv/generic/make-derivation.nix:65:5:

           64|   mkDerivation =
           65|     fnOrAttrs:
             |     ^
           66|     if builtins.isFunction fnOrAttrs then

       … while calling anonymous lambda

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/lib/attrsets.nix:1182:17:

         1181|         mapAttrs (
         1182|           name: value:
             |                 ^
         1183|           if isAttrs value && cond value then recurse (path ++ [ name ]) value else f (path ++ [ name ]) value

       … from call site

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/lib/attrsets.nix:1183:85:

         1182|           name: value:
         1183|           if isAttrs value && cond value then recurse (path ++ [ name ]) value else f (path ++ [ name ]) value
             |                                                                                     ^
         1184|         );

       … while calling anonymous lambda

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/lib/modules.nix:273:71:

          272|           # For definitions that have an associated option
          273|           declaredConfig = mapAttrsRecursiveCond (v: !isOption v) (_: v: v.value) options;
             |                                                                       ^
          274|

       … while evaluating the option `system.systemBuilderArgs':

       … from call site

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/lib/modules.nix:1134:11:

         1133|         if all (def: type.check def.value) defsFinal then
         1134|           type.merge loc defsFinal
             |           ^
         1135|         else

       … while calling anonymous lambda

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/lib/types.nix:831:22:

          830|                 # Non-lazy merge Function
          831|                 loc: defs:
             |                      ^
          832|                 mapAttrs (n: v: v.value) (

       … from call site

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/lib/types.nix:833:19:

          832|                 mapAttrs (n: v: v.value) (
          833|                   filterAttrs (n: v: v ? value) (
             |                   ^
          834|                     zipAttrsWith (name: defs: (mergeDefinitions (loc ++ [ name ]) elemType (defs)).optionalValue)

       … while calling 'filterAttrs'

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/lib/attrsets.nix:657:23:

          656|   */
          657|   filterAttrs = pred: set: removeAttrs set (filter (name: !pred name set.${name}) (attrNames set));
             |                       ^
          658|

       … while calling anonymous lambda

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/lib/attrsets.nix:657:53:

          656|   */
          657|   filterAttrs = pred: set: removeAttrs set (filter (name: !pred name set.${name}) (attrNames set));
             |                                                     ^
          658|

       … from call site

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/lib/attrsets.nix:657:60:

          656|   */
          657|   filterAttrs = pred: set: removeAttrs set (filter (name: !pred name set.${name}) (attrNames set));
             |                                                            ^
          658|

       … while calling anonymous lambda

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/lib/types.nix:833:35:

          832|                 mapAttrs (n: v: v.value) (
          833|                   filterAttrs (n: v: v ? value) (
             |                                   ^
          834|                     zipAttrsWith (name: defs: (mergeDefinitions (loc ++ [ name ]) elemType (defs)).optionalValue)

       … while calling anonymous lambda

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/lib/types.nix:834:41:

          833|                   filterAttrs (n: v: v ? value) (
          834|                     zipAttrsWith (name: defs: (mergeDefinitions (loc ++ [ name ]) elemType (defs)).optionalValue)
             |                                         ^
          835|                       # Push down position info.

       … while calling anonymous lambda

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/lib/modules.nix:1100:11:

         1099|         defs' = concatMap (
         1100|           m:
             |           ^
         1101|           map (

       … while evaluating definitions from `/nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/nixos/modules/system/activation/activatable-system.nix':

       … from call site

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/lib/modules.nix:1110:80:

         1109|               }
         1110|           ) (addErrorContext "while evaluating definitions from `${m.file}':" (dischargeProperties m.value))
             |                                                                                ^
         1111|         ) defs;

       … while calling 'dischargeProperties'

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/lib/modules.nix:1203:5:

         1202|   dischargeProperties =
         1203|     def:
             |     ^
         1204|     if def._type or "" == "merge" then

       … from call site

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/nixos/modules/system/activation/activation-script.nix:174:20:

          173|         // {
          174|           script = systemActivationScript set false;
             |                    ^
          175|         };

       … while calling 'systemActivationScript'

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/nixos/modules/system/activation/activation-script.nix:30:10:

           29|   systemActivationScript =
           30|     set: onlyDry:
             |          ^
           31|     let

       … from call site

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/nixos/modules/system/activation/activation-script.nix:71:9:

           70|
           71|       ${textClosureMap id (withDrySnippets) (attrNames withDrySnippets)}
             |         ^
           72|

       … while calling 'textClosureMap'

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/lib/strings-with-deps.nix:168:20:

          167|   textClosureMap =
          168|     f: predefined: names:
             |                    ^
          169|     concatStringsSep "\n" (map f (textClosureList predefined names));

       … while calling 'id'

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/lib/trivial.nix:40:8:

           39|   */
           40|   id = x: x;
             |        ^
           41|

       … while calling anonymous lambda

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/lib/attrsets.nix:1182:17:

         1181|         mapAttrs (
         1182|           name: value:
             |                 ^
         1183|           if isAttrs value && cond value then recurse (path ++ [ name ]) value else f (path ++ [ name ]) value

       … from call site

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/lib/attrsets.nix:1183:85:

         1182|           name: value:
         1183|           if isAttrs value && cond value then recurse (path ++ [ name ]) value else f (path ++ [ name ]) value
             |                                                                                     ^
         1184|         );

       … while calling anonymous lambda

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/lib/modules.nix:273:71:

          272|           # For definitions that have an associated option
          273|           declaredConfig = mapAttrsRecursiveCond (v: !isOption v) (_: v: v.value) options;
             |                                                                       ^
          274|

       … while evaluating the option `system.activationScripts.etc.text':

       … while calling anonymous lambda

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/lib/modules.nix:1100:11:

         1099|         defs' = concatMap (
         1100|           m:
             |           ^
         1101|           map (

       … while evaluating definitions from `/nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/nixos/modules/system/etc/etc-activation.nix':

       … from call site

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/lib/modules.nix:1110:80:

         1109|               }
         1110|           ) (addErrorContext "while evaluating definitions from `${m.file}':" (dischargeProperties m.value))
             |                                                                                ^
         1111|         ) defs;

       … while calling 'dischargeProperties'

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/lib/modules.nix:1203:5:

         1202|   dischargeProperties =
         1203|     def:
             |     ^
         1204|     if def._type or "" == "merge" then

       … while calling anonymous lambda

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/lib/attrsets.nix:1529:14:

         1528|         zipAttrsWith (
         1529|           n: values:
             |              ^
         1530|           let

       … while calling anonymous lambda

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/lib/types.nix:818:27:

          817|                   (
          818|                     name: defs:
             |                           ^
          819|                     let

       … while calling anonymous lambda

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/lib/modules.nix:1100:11:

         1099|         defs' = concatMap (
         1100|           m:
             |           ^
         1101|           map (

       … while evaluating definitions from `/nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/nixos/modules/system/etc/etc.nix':

       … from call site

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/lib/modules.nix:1110:80:

         1109|               }
         1110|           ) (addErrorContext "while evaluating definitions from `${m.file}':" (dischargeProperties m.value))
             |                                                                                ^
         1111|         ) defs;

       … while calling 'dischargeProperties'

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/lib/modules.nix:1203:5:

         1202|   dischargeProperties =
         1203|     def:
             |     ^
         1204|     if def._type or "" == "merge" then

       … from call site

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/lib/attrsets.nix:293:73:

          292|       len = length attrPath;
          293|       atDepth = n: if n == len then value else { ${elemAt attrPath n} = atDepth (n + 1); };
             |                                                                         ^
          294|     in

       … while calling 'atDepth'

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/lib/attrsets.nix:293:17:

          292|       len = length attrPath;
          293|       atDepth = n: if n == len then value else { ${elemAt attrPath n} = atDepth (n + 1); };
             |                 ^
          294|     in

       … while evaluating derivation 'etc'
         whose name attribute is located at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/pkgs/stdenv/generic/make-derivation.nix:480:13

       … while evaluating attribute 'buildCommand' of derivation 'etc'

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/pkgs/build-support/trivial-builders/default.nix:80:16:

           79|         enableParallelBuilding = true;
           80|         inherit buildCommand name;
             |                ^
           81|         passAsFile = [ "buildCommand" ] ++ (derivationArgs.passAsFile or [ ]);

       … from call site

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/nixos/modules/system/etc/etc.nix:56:11:

           55|         mkdir -p "$out/etc"
           56|         ${lib.concatMapStringsSep "\n" (
             |           ^
           57|           etcEntry:

       … while calling 'concatMapStringsSep'

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/lib/strings.nix:231:13:

          230|   concatMapStringsSep =
          231|     sep: f: list:
             |             ^
          232|     concatStringsSep sep (map f list);

       … while calling anonymous lambda

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/nixos/modules/system/etc/etc.nix:57:11:

           56|         ${lib.concatMapStringsSep "\n" (
           57|           etcEntry:
             |           ^
           58|           lib.escapeShellArgs [

       … from call site

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/nixos/modules/system/etc/etc.nix:58:11:

           57|           etcEntry:
           58|           lib.escapeShellArgs [
             |           ^
           59|             "makeEtcEntry"

       … while calling 'concatMapStringsSep'

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/lib/strings.nix:231:13:

          230|   concatMapStringsSep =
          231|     sep: f: list:
             |             ^
          232|     concatStringsSep sep (map f list);

       … while calling 'escapeShellArg'

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/lib/strings.nix:1136:5:

         1135|   escapeShellArg =
         1136|     arg:
             |     ^
         1137|     let

       … while calling anonymous lambda

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/lib/attrsets.nix:1182:17:

         1181|         mapAttrs (
         1182|           name: value:
             |                 ^
         1183|           if isAttrs value && cond value then recurse (path ++ [ name ]) value else f (path ++ [ name ]) value

       … from call site

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/lib/attrsets.nix:1183:85:

         1182|           name: value:
         1183|           if isAttrs value && cond value then recurse (path ++ [ name ]) value else f (path ++ [ name ]) value
             |                                                                                     ^
         1184|         );

       … while calling anonymous lambda

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/lib/modules.nix:273:71:

          272|           # For definitions that have an associated option
          273|           declaredConfig = mapAttrsRecursiveCond (v: !isOption v) (_: v: v.value) options;
             |                                                                       ^
          274|

       … while evaluating the option `environment.etc."systemd/network/40-wg-vxlan.netdev".source':

       … while calling anonymous lambda

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/lib/modules.nix:1100:11:

         1099|         defs' = concatMap (
         1100|           m:
             |           ^
         1101|           map (

       … while evaluating definitions from `/nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/nixos/modules/system/boot/networkd.nix':

       … from call site

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/lib/modules.nix:1110:80:

         1109|               }
         1110|           ) (addErrorContext "while evaluating definitions from `${m.file}':" (dischargeProperties m.value))
             |                                                                                ^
         1111|         ) defs;

       … while calling 'dischargeProperties'

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/lib/modules.nix:1203:5:

         1202|   dischargeProperties =
         1203|     def:
             |     ^
         1204|     if def._type or "" == "merge" then

       … while evaluating derivation 'unit-40-wg-vxlan.netdev'
         whose name attribute is located at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/pkgs/stdenv/generic/make-derivation.nix:480:13

       … while evaluating attribute 'text' of derivation 'unit-40-wg-vxlan.netdev'

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/nixos/lib/systemd-lib.nix:82:11:

           81|           # making the mv operation fail.
           82|           text = optionalString (unit.text != null) unit.text;
             |           ^
           83|           passAsFile = [ "text" ];

       … from call site

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/nixos/lib/systemd-lib.nix:82:18:

           81|           # making the mv operation fail.
           82|           text = optionalString (unit.text != null) unit.text;
             |                  ^
           83|           passAsFile = [ "text" ];

       … while calling 'optionalString'

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/lib/strings.nix:701:26:

          700|   */
          701|   optionalString = cond: string: if cond then string else "";
             |                          ^
          702|

       … while calling anonymous lambda

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/lib/attrsets.nix:1182:17:

         1181|         mapAttrs (
         1182|           name: value:
             |                 ^
         1183|           if isAttrs value && cond value then recurse (path ++ [ name ]) value else f (path ++ [ name ]) value

       … from call site

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/lib/attrsets.nix:1183:85:

         1182|           name: value:
         1183|           if isAttrs value && cond value then recurse (path ++ [ name ]) value else f (path ++ [ name ]) value
             |                                                                                     ^
         1184|         );

       … while calling anonymous lambda

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/lib/modules.nix:273:71:

          272|           # For definitions that have an associated option
          273|           declaredConfig = mapAttrsRecursiveCond (v: !isOption v) (_: v: v.value) options;
             |                                                                       ^
          274|

       … while evaluating the option `systemd.network.units."40-wg-vxlan.netdev".text':

       … while calling anonymous lambda

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/lib/modules.nix:1100:11:

         1099|         defs' = concatMap (
         1100|           m:
             |           ^
         1101|           map (

       … while evaluating definitions from `/nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/nixos/modules/system/boot/networkd.nix':

       … from call site

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/lib/modules.nix:1110:80:

         1109|               }
         1110|           ) (addErrorContext "while evaluating definitions from `${m.file}':" (dischargeProperties m.value))
             |                                                                                ^
         1111|         ) defs;

       … while calling 'dischargeProperties'

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/lib/modules.nix:1203:5:

         1202|   dischargeProperties =
         1203|     def:
             |     ^
         1204|     if def._type or "" == "merge" then

       … from call site

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/nixos/modules/system/boot/networkd.nix:3287:16:

         3286|         inherit (def) enable;
         3287|         text = f def;
             |                ^
         3288|       };

       … while calling 'netdevToUnit'

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/nixos/lib/systemd-network-units.nix:30:5:

           29|   netdevToUnit =
           30|     def:
             |     ^
           31|     commonMatchText def

       … from call site

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/nixos/lib/systemd-network-units.nix:88:7:

           87|     '')
           88|     + optionalString (def.wireguardConfig != { }) ''
             |       ^
           89|       [WireGuard]

       … while calling 'optionalString'

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/lib/strings.nix:701:26:

          700|   */
          701|   optionalString = cond: string: if cond then string else "";
             |                          ^
          702|

       … while calling anonymous lambda

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/lib/attrsets.nix:1182:17:

         1181|         mapAttrs (
         1182|           name: value:
             |                 ^
         1183|           if isAttrs value && cond value then recurse (path ++ [ name ]) value else f (path ++ [ name ]) value

       … from call site

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/lib/attrsets.nix:1183:85:

         1182|           name: value:
         1183|           if isAttrs value && cond value then recurse (path ++ [ name ]) value else f (path ++ [ name ]) value
             |                                                                                     ^
         1184|         );

       … while calling anonymous lambda

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/lib/modules.nix:273:71:

          272|           # For definitions that have an associated option
          273|           declaredConfig = mapAttrsRecursiveCond (v: !isOption v) (_: v: v.value) options;
             |                                                                       ^
          274|

       … while evaluating the option `systemd.network.netdevs."40-wg-vxlan".wireguardConfig':

       … while calling anonymous lambda

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/lib/modules.nix:1133:17:

         1132|       if isDefined then
         1133|         if all (def: type.check def.value) defsFinal then
             |                 ^
         1134|           type.merge loc defsFinal

       … from call site

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/lib/modules.nix:1133:22:

         1132|       if isDefined then
         1133|         if all (def: type.check def.value) defsFinal then
             |                      ^
         1134|           type.merge loc defsFinal

       … while calling 'check'

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/lib/types.nix:1460:57:

         1459|       # Augment the given type with an additional type check function.
         1460|       addCheck = elemType: check: elemType // { check = x: elemType.check x && check x; };
             |                                                         ^
         1461|

       … from call site

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/lib/types.nix:1460:80:

         1459|       # Augment the given type with an additional type check function.
         1460|       addCheck = elemType: check: elemType // { check = x: elemType.check x && check x; };
             |                                                                                ^
         1461|

       … while calling 'checkUnitConfig'

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/nixos/lib/systemd-lib.nix:282:20:

          281|   checkUnitConfig =
          282|     group: checks: attrs:
             |                    ^
          283|     let

       … while calling anonymous lambda

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/nixos/lib/systemd-lib.nix:296:27:

          295|       )) attrs;
          296|       errors = concatMap (c: c group defs) checks;
             |                           ^
          297|     in

       … from call site

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/nixos/lib/systemd-lib.nix:296:30:

          295|       )) attrs;
          296|       errors = concatMap (c: c group defs) checks;
             |                              ^
          297|     in

       … while calling 'assertRange'

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/nixos/lib/systemd-lib.nix:205:28:

          204|   assertRange =
          205|     name: min: max: group: attr:
             |                            ^
          206|     optional (

       … from call site

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/nixos/lib/systemd-lib.nix:206:5:

          205|     name: min: max: group: attr:
          206|     optional (
             |     ^
          207|       attr ? ${name} && !(min <= attr.${name} && max >= attr.${name})

       … while calling 'optional'

         at /nix/store/qvzh8safmlwl7akk3ffgx1mjw8hs2w76-source/lib/lists.nix:777:20:

          776|   */
          777|   optional = cond: elem: if cond then [ elem ] else [ ];
             |                    ^
          778|

       error: cannot compare a string with an integer
